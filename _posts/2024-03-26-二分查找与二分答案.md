---
layout: post
title: äºŒåˆ†æŸ¥æ‰¾ä¸äºŒåˆ†ç­”æ¡ˆ
date:  2024-03-26
tags: [cs]
comments: true
author: kevin
---

ç®—æ³•å­¦ä¹ ä¸­ç»å¸¸è¢«äºŒåˆ†é—®é¢˜å›°æ‰°ï¼ˆå¤ªå¼±äº†æˆ‘ï¼‰ï¼Œäºæ˜¯è®°å½•ä¸€ä¸‹

### äºŒåˆ†æŸ¥æ‰¾å¥½ç”¨çš„æ¨¡æ¿



<img src="https://raw.githubusercontent.com/Promin3/Promin3.github.io/main/images/%E6%88%AA%E5%B1%8F2024-03-26%2020.25.06.png" alt="æˆªå±2024-03-26 20.25.06" style="zoom:50%;" />

```c++
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;

const int N = 1e5 + 5;

int a[N], q, k, n;

int bsearch_front(int x){
    int l = -1, r = n;
    while( l + 1 < r){
        int mid = (l + r) >> 1;
        if(a[mid] >= x) r = mid;  // if(è¦æ‰¾å¤§äºç­‰äºxçš„æœ€å°çš„ä½ç½®) æŒ‡å‘å³è¾¹åˆ™æ˜¯ r = mid
        else l = mid;
    }
    return r;
}

int bsearch_end(int x){
    int l = -1, r = n;
    while( l + 1 < r){
        int mid = (l + r) >> 1;
        if(a[mid] <= x) l = mid;// if(è¦æ‰¾å°äºç­‰äºxçš„æœ€å¤§çš„ä½ç½®) æŒ‡å‘å·¦è¾¹åˆ™æ˜¯ l = mid
        else r = mid;
    }
    return l;
}

int main()
{
    cin >> n >> q;

    for (int i = 0; i < n; i ++ )
        cin >> a[i];

    while(q--){
        cin >> k;
        if(bsearch_front(k) == n || bsearch_end(k) == -1 || bsearch_front(k) > bsearch_end(k)) cout <<"-1 -1"<< endl;
        else cout << bsearch_front(k) << " "<< bsearch_end(k) << endl;
    }


}
```



è®°å¿†æ–¹æ³•ï¼š

å½“æˆ‘ä»¬å¯»æ‰¾å¤§äºç­‰äºï¼ˆæˆ–å¤§äºï¼‰xçš„æœ€å°ä½ç½®æ—¶ï¼Œå¯è¡ŒåŸŸåœ¨å³è¾¹ï¼ŒæŒ‡å‘ğŸ‘‰ã€‚ æ•…åœ¨ if åå¯¹rè¿›è¡Œèµ‹å€¼ï¼Œå¹¶åœ¨æœ€åè¿”å› r ä½œä¸ºæŸ¥æ‰¾ç­”æ¡ˆ

å½“æˆ‘ä»¬å¯»æ‰¾å°äºç­‰äºï¼ˆæˆ–å°äºï¼‰xçš„æœ€å¤§ä½ç½®æ—¶ï¼Œå¯è¡ŒåŸŸåœ¨å·¦è¾¹ï¼ŒæŒ‡å‘ğŸ‘ˆã€‚ æ•…åœ¨ if åå¯¹lè¿›è¡Œèµ‹å€¼ï¼Œå¹¶åœ¨æœ€åè¿”å› l ä½œä¸ºæŸ¥æ‰¾ç­”æ¡ˆ

<img src="https://raw.githubusercontent.com/Promin3/Promin3.github.io/main/images/%E6%88%AA%E5%B1%8F2024-03-27%2001.53.14.png" alt="æˆªå±2024-03-27 01.53.14" style="zoom:50%;" />

### äºŒåˆ†ç­”æ¡ˆçš„æ¨¡æ¿å’Œä¾‹é¢˜

<img src="https://raw.githubusercontent.com/Promin3/Promin3.github.io/main/images/æˆªå±2024-03-27 01.44.49.png" alt="æˆªå±2024-03-27 01.44.49" style="zoom:90%;" />



```c++
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;
const int N = 1e6 + 10;

typedef long long LL;

int d[N], s[N], t[N], r[N];
LL b[N];

int n,m;

bool check(int x){
    for (int i = 1; i <= n; i ++ )
        b[i] = r[i] - r[i-1];
        
        
    for (int i = 1; i <= x; i ++ ){
        b[s[i]] -= d[i];
        b[t[i] + 1] += d[i];
    }
    
    for (int i = 1; i <= n; i ++ ){
        b[i] += b[i-1];
        if(b[i] < 0) return false;
    }
    return true;    
}


int main()
{
    cin >> n >> m;
    for (int i = 1; i <= n; i ++ ){
        cin >> r[i];
        // å®¹æ˜“çŠ¯é”™ï¼š b[i] = r[i] - r[i-1];  å·®åˆ†æ•°ç»„
    }
    
    for (int i = 1; i <= m; i ++ ) cin >> d[i] >> s[i] >> t[i];
    
    int l = 0, r = m + 1;
    while(l + 1 < r){
        int mid = l + r >> 1;
        if(check(mid)) l = mid;
        else r = mid;
    }
    
    if(l == m) printf("%d", 0);
    else printf("%d\n%d", -1, l + 1);
    return 0;
}
```



è®°å¿†æ–¹æ³•ï¼šåœ¨äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€ä¸Šï¼ŒæŠŠifå†…åˆ¤æ–­æ¡ä»¶æ”¹ä¸ºcheckå‡½æ•°

å½“ä½ è®¾å®šçš„å¯è¡ŒåŒºåœ¨å·¦è¾¹ğŸ‘ˆæ—¶ï¼ˆå³å°äºxçš„æƒ…å†µcheckå‡½æ•°å‡è¿”å›trueï¼‰ï¼Œåˆ™ifåæ¥ l = mid

æœ€ålæ˜¯æ»¡è¶³checkçš„æœ€å¤§è§£ï¼Œå³æœ€å¤§åŒ–å¯è¡Œè§£ï¼Œl + 1å³ä¸æ»¡è¶³

ä¸Šé¢˜ä¸­ l == m å½“æœ€å¤§å€¼méƒ½æ»¡è¶³checkæ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰è®¢å•å‡æˆç«‹ï¼Œ l < måˆ™è¡¨ç¤º l + 1ä¸æ»¡è¶³

<img src="https://raw.githubusercontent.com/Promin3/Promin3.github.io/main/images/%E6%88%AA%E5%B1%8F2024-03-27%2001.46.53.png" alt="æˆªå±2024-03-27 01.46.53" style="zoom:50%;" />